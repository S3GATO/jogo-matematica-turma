<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pódio da Turma</title>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: #e0e0e0;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    .falling-symbols {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    .symbol {
      position: absolute;
      font-size: 2.4rem;
      color: rgba(255, 255, 255, 0.45);
      text-shadow: 0 0 6px rgba(255,255,255,0.3);
      animation: fall linear infinite;
    }
    @keyframes fall {
      0% { transform: translateY(-150px) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(1080deg); }
    }
    header { text-align: center; padding: 20px; background: #2d2d2d; box-shadow: 0 4px 12px rgba(0,0,0,0.5); }
    main { max-width: 900px; margin: 40px auto; padding: 30px; background: #2a2a2a; border-radius: 12px; box-shadow: 0 6px 25px rgba(0,0,0,0.6); text-align: center; }
    .podium { display: flex; justify-content: center; gap: 50px; margin: 60px 0; flex-wrap: wrap; }
    .lugar { padding: 35px; border-radius: 12px; width: 260px; box-shadow: 0 8px 25px rgba(0,0,0,0.5); color: #111; font-weight: bold; }
    .lugar1 { background: #ffd700; }
    .lugar2 { background: #c0c0c0; }
    .lugar3 { background: #cd7f32; }
    table { width: 100%; border-collapse: collapse; margin-top: 40px; }
    th, td { padding: 14px; border: 1px solid #444; text-align: left; }
    th { background: #383838; }
    a { color: #4fc3f7; font-size: 1.2rem; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>

<div class="falling-symbols" id="symbols"></div>

<header>
  <h1>Pódio da Turma</h1>
</header>

<main>
  <div class="podium" id="podium"></div>

  <table>
    <thead><tr><th>Posição</th><th>Aluno</th><th>Acertos</th></tr></thead>
    <tbody id="tabela"></tbody>
  </table>

  <br><br>
  <a href="aluno.html">Jogar</a> • <a href="professora.html">Área da professora</a>
</main>

<script>
  // Seu firebaseConfig aqui
  const firebaseConfig = { /* cole seu config */ };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Ajuste para a sala que você quer monitorar (pode ser dinâmica se preferir)
  const salaAtual = "salaAtual"; // ou pegue da URL, localStorage, etc.

  db.ref(`salas/${salaAtual}/respostas`).on("value", snap => {
    const respostas = snap.val() || {};
    const ranking = Object.entries(respostas)
      .map(([nome, data]) => ({ nome, acertos: data.acertos || 0 }))
      .sort((a, b) => b.acertos - a.acertos);

    const podium = document.getElementById("podium");
    podium.innerHTML = "";
    for (let i = 0; i < Math.min(3, ranking.length); i++) {
      const div = document.createElement("div");
      div.className = `lugar lugar${i+1}`;
      div.innerHTML = `
        <h2>${i+1}º lugar</h2>
        <p style="font-size:1.8rem; margin:15px 0;">${ranking[i].nome}</p>
        <p style="font-size:3rem;">${ranking[i].acertos}</p>
      `;
      podium.appendChild(div);
    }

    const tbody = document.getElementById("tabela");
    tbody.innerHTML = "";
    ranking.forEach((item, idx) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${idx+1}º</td><td>${item.nome}</td><td>${item.acertos}</td>`;
      tbody.appendChild(tr);
    });

    if (ranking.length === 0) {
      podium.innerHTML = "<p style='font-size:1.6rem; color:#bbb;'>Nenhuma pontuação registrada ainda.</p>";
    }
  });

  // Símbolos matemáticos caindo
  const simbolos = ["+", "−", "×", "÷", "=", "²", "³", "√", "π", "∞", "%"];
  setInterval(() => {
    const s = document.createElement("div");
    s.className = "symbol";
    s.textContent = simbolos[Math.floor(Math.random() * simbolos.length)];
    s.style.left = Math.random() * 100 + "vw";
    s.style.animationDuration = (8 + Math.random() * 15) + "s";
    document.getElementById("symbols").appendChild(s);
    setTimeout(() => s.remove(), 35000);
  }, 500);
</script>
</body>
</html>